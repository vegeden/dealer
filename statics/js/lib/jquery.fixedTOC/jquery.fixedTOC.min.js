(function ($) {$.fixedTOC = function (el, settings) {var base = this,s = null;base.$el = $(el);base.el = el;base.$el.data("fixedTOC", base);base.settings = $.extend({}, $.fixedTOC.defaultSettings, settings);s = base.settings;if (!s.useSubMenus) {s.tocLinks = '.toc-h1 > a';}base.methods = {init : function () {s.tocSub.slideUp();$('.toc-sub').each(function(){if(!$(this).hasClass('closed')) {$(this).parent().find('div').transition({ rotate: '0deg'});}});base.$el.addClass(s.tocUpClass);},doOpenMenu : function () {s.tocLink.on(s.menuOpens, function () {if (base.$el.hasClass(s.tocUpClass)) {s.tocLink.find('span').addClass('rotate');base.$el.stop().animate({top: '0'}, s.menuSpeed, function () {base.$el.removeClass(s.tocUpClass);});} else {s.tocHeight = base.$el.height() + 20;s.tocLink.find('span').removeClass('rotate');}return false;});},doOpenItem : function () {$('.toc-h1>a').on('click', function () {s.tocSub.each(function () {if (!$(this).hasClass('closed')) {$(this).stop().slideUp().addClass('closed');}});var toc_sub = $(this).parent().find('.toc-sub').stop().slideToggle();if( toc_sub.hasClass('closed') ) {toc_sub.removeClass('closed');$(this).find('div').transition({ rotate: '0deg'});} else {toc_sub.addClass('closed');$(this).find('div').transition({ rotate: '-90deg'});}return false;});},doScroll : function () {$(s.tocLinks).on('click', function () {s.currHash = $(this)[0].hash;$('html, body').animate({scrollTop: $(s.currHash).offset().top - 80}, s.scrollSpeed, function () {location.hash = s.currHash;});return false;});},doCloseMenu : function () {$('#toc-holder').on('mouseleave', function () {	s.tocHeight = base.$el.height() + 20;s.tocLink.find('span').removeClass('rotate');});},doTopLink : function () {$(s.topLink).on('click', function () {s.currHash = $(this)[0].hash;return false;});}};base.methods.init();base.methods.doOpenMenu();if (s.useSubMenus) {base.methods.doOpenItem();}base.methods.doScroll();base.methods.doCloseMenu();if (s.topLinkWorks) {base.methods.doTopLink();}};$.fixedTOC.defaultSettings = {tocHeight        : null,tocSub           : $('.toc-sub'),tocUpClass       : 'toc-up',tocLink          : $('#toc-link'),tocLinks         : '.toc-h1 ul a',topLink          : $('#top-link'),currHash         : null,scrollSpeed      : 1000,menuSpeed        : 300,useSubMenus      : true,resetSubMenus    : true,topLinkWorks     : true};$.fn.fixedTOC = function (settings) {return this.each(function () {(new $.fixedTOC(this, settings));});};})(jQuery);